<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/ >
		<title>Spider Charts</title>


		<link rel="stylesheet" href="spiderStyle.css">
		<link rel="stylesheet" href="patternFills.css">

		<!-- Google fonts -->
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>

		<!-- D3.js -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>





	</head>
	<body>



<!-- <div class="plot-grid">


	<div class="plot-cell">
		<div class="radarChart"></div>
	</div>

	<div class="plot-cell">
		<div class="radarChart1"></div>
	</div>

	<div class="plot-cell">
	</div>


</div> -->

<div class='plot-grid'>

    <div class='plot-cell c1'></div>

    <div class='plot-cell c2'></div>

</div>

<!-- <script src="spiderChart.js"></script> -->
<!-- uncomment when done -->





<script>



function RadarChart(id, data, options) {

var lineColor = "#959595";
var textColor = "#cbcbcb"

var cfg = {
// circle width
w: 300,
// height of the circle
h: 300,
// the margins of the SVG
margin: {top: 20, right: 20, bottom: 20, left: 20},
// tow many levels or inner circles should there be drawn
levels: 3,
// that is the value that the biggest circle will represent
maxValue: 0,
// how much farther than the radius of the outer circle should the labels be placed
labelFactor: 1.35,
// the number of pixels after which a label needs to be given a new line
wrapWidth: 100,
// the opacity of the area of the blob
opacityArea: 0.15,
// the size of the colored circles of each blog
dotRadius: 4,
// the opacity of the circles of each blob
opacityCircles: 0.0,
// the width of the stroke around each blob
strokeWidth: 1,
// if true the area and stroke will follow a round path (cardinal-closed)
roundStrokes: false,
// color function
color: d3.scale.category10(),

//nav: circle line color
circleColor: lineColor,
//nav: spoke color
spokeColor: lineColor,
circleWeight: 1.25,
spokeWeight: 1.25,
hoverOpacity: 0.4
//nav: patterns

};

// put all of the options into a variable called cfg
if('undefined' !== typeof options){
	for(var i in options){
		if('undefined' !== typeof options[i]){ cfg[i] = options[i]; }
	} // for i in options loop
} // if undefined

// if the supplied maxValue is smaller than the actual one, replace by the max in the data
var maxValue = Math.max(cfg.maxValue, d3.max(data, function(i){return d3.max(i.map(function(o){return o.value;}))}));

var allAxis = (data[0].map(function(i, j){return i.axis})),
// names of each axis
total = allAxis.length,
//The number of different axes
radius = Math.min(cfg.w/2, cfg.h/2),
// radius of the outermost circle
Format = d3.format(''),
// percentage formatting (used to be a '%')

angleSlice = Math.PI * 2 / total;
// the width in radians of each "slice"

//Scale for the radius
var rScale = d3.scale.linear()
.range([0, radius])
.domain([0, maxValue]);




//////////// Create the container SVG and g /////////////

//Remove whatever chart with the same id/class was present before
d3.select(id).select("svg").remove();

//Initiate the radar chart SVG
var svg = d3.select(id).append("svg")
	.attr("width",  cfg.w + cfg.margin.left + cfg.margin.right)
	.attr("height", cfg.h + cfg.margin.top + cfg.margin.bottom)
	.attr("class", "radar"+id);
//Append a g element
var g = svg.append("g")
	.attr("transform", "translate(" + (cfg.w/2 + cfg.margin.left) + "," + (cfg.h/2 + cfg.margin.top) + ")");




////////// Glow filter for some extra pizzazz ///////////

//Filter for the outside glow
var filter = g.append('defs').append('filter').attr('id','glow'),
feGaussianBlur = filter.append('feGaussianBlur').attr('stdDeviation','2.5').attr('result','coloredBlur'),
feMerge = filter.append('feMerge'),
feMergeNode_1 = feMerge.append('feMergeNode').attr('in','coloredBlur'),
feMergeNode_2 = feMerge.append('feMergeNode').attr('in','SourceGraphic');




/////////////// Draw the Circular grid //////////////////

//Wrapper for the grid & axes
var axisGrid = g.append("g").attr("class", "axisWrapper");

//Draw the background circles
axisGrid.selectAll(".levels")
.data(d3.range(1,(cfg.levels+1)).reverse())
.enter()
.append("circle")
.attr("class", "gridCircle")
.attr("r", function(d, i){return radius/cfg.levels*d;})
// .style("fill", "#CDCDCD")
// nav: circle color
.style("stroke", cfg.circleColor)
.style("fill-opacity", cfg.opacityCircles)
// .style("filter" , "url(#glow)");
.style("filter" , "none");

//Text indicating at what % each level is
axisGrid.selectAll(".axisLabel")
.data(d3.range(1,(cfg.levels+1)).reverse())
.enter().append("text")
.attr("class", "axisLabel")
.attr("x", 4)
.attr("y", function(d){return -d*radius/cfg.levels;})
.attr("dy", "-0.2em")
.style("font-size", "14px")
// nav: text color
.attr("fill", textColor)
.text(function(d,i) { return Format(maxValue * d/cfg.levels); });




//////////////////// Draw the axes //////////////////////

//Create the straight lines radiating outward from the center
var axis = axisGrid.selectAll(".axis")
.data(allAxis)
.enter()
.append("g")
.attr("class", "axis");
//Append the lines
axis.append("line")
.attr("x1", 0)
.attr("y1", 0)
.attr("x2", function(d, i){ return rScale(maxValue*1.1) * Math.cos(angleSlice*i - Math.PI/2); })
.attr("y2", function(d, i){ return rScale(maxValue*1.1) * Math.sin(angleSlice*i - Math.PI/2); })
.attr("class", "line")
// nav: spoke color
.style("stroke", cfg.spokeColor)
// nav: spoke width
.style("stroke-width", cfg.spokeWeight);

//Append the labels at each axis
axis.append("text")
.attr("class", "legend")
.style("font-size", "12px")
.attr("text-anchor", "middle")
.attr("dy", "0.35em")
.attr("x", function(d, i){ return rScale(maxValue * cfg.labelFactor) * Math.cos(angleSlice*i - Math.PI/2); })
.attr("y", function(d, i){ return rScale(maxValue * cfg.labelFactor) * Math.sin(angleSlice*i - Math.PI/2); })
.text(function(d){return d})
.call(wrap, cfg.wrapWidth);




///////////// Draw the radar chart blobs ////////////////

//The radial line function
var radarLine = d3.svg.line.radial()
.interpolate("linear-closed")
.radius(function(d) { return rScale(d.value); })
.angle(function(d,i) {	return i*angleSlice; });

if(cfg.roundStrokes) {
radarLine.interpolate("cardinal-closed");
}

//Create a wrapper for the blobs
var blobWrapper = g.selectAll(".radarWrapper")
.data(data)
.enter().append("g")
.attr("class", "radarWrapper");

//Append the backgrounds
blobWrapper
.append("path")
.attr("class", "radarArea")
.attr("d", function(d,i) { return radarLine(d); })
.style("fill", function(d,i) { return cfg.color(i); })
.style("fill-opacity", cfg.opacityArea)
.on('mouseover', function (d,i){
	//Dim all blobs
	d3.selectAll(".radarArea")
		.transition().duration(200)
		.style("fill-opacity", 0.1);
	//Bring back the hovered over blob
	d3.select(this)
		.transition().duration(200)
		.style("fill-opacity", cfg.hoverOpacity);
})
.on('mouseout', function(){
	//Bring back all blobs
	d3.selectAll(".radarArea")
		.transition().duration(200)
		.style("fill-opacity", cfg.opacityArea);
});

//Create the outlines
blobWrapper.append("path")
.attr("class", "radarStroke")
.attr("d", function(d,i) { return radarLine(d); })
.style("stroke-width", cfg.strokeWidth + "px")
.style("stroke", function(d,i) { return cfg.color(i); })
.style("fill", "none");
// .style("filter" , "url(#glow)");

//Append the circles
blobWrapper.selectAll(".radarCircle")
.data(function(d,i) { return d; })
.enter().append("circle")
.attr("class", "radarCircle")
.attr("r", cfg.dotRadius)
.attr("cx", function(d,i){ return rScale(d.value) * Math.cos(angleSlice*i - Math.PI/2); })
.attr("cy", function(d,i){ return rScale(d.value) * Math.sin(angleSlice*i - Math.PI/2); })
.style("fill", function(d,i,j) { return cfg.color(j); })
.style("fill-opacity", 0.8);




//////// Append invisible circles for tooltip ///////////

//Wrapper for the invisible circles on top
var blobCircleWrapper = g.selectAll(".radarCircleWrapper")
.data(data)
.enter().append("g")
.attr("class", "radarCircleWrapper");

//Append a set of invisible circles on top for the mouseover pop-up
blobCircleWrapper.selectAll(".radarInvisibleCircle")
.data(function(d,i) { return d; })
.enter().append("circle")
.attr("class", "radarInvisibleCircle")
.attr("r", cfg.dotRadius*1.5)
.attr("cx", function(d,i){ return rScale(d.value) * Math.cos(angleSlice*i - Math.PI/2); })
.attr("cy", function(d,i){ return rScale(d.value) * Math.sin(angleSlice*i - Math.PI/2); })
.style("fill", "none")
.style("pointer-events", "all")
.on("mouseover", function(d,i) {
	newX =  parseFloat(d3.select(this).attr('cx')) - 10;
	newY =  parseFloat(d3.select(this).attr('cy')) - 10;

	tooltip
		.attr('x', newX)
		.attr('y', newY)
		.text(Format(d.value))
		.transition().duration(200)
		.style('opacity', 1);
})
.on("mouseout", function(){
	tooltip.transition().duration(200)
		.style("opacity", 0);
});

//Set up the small tooltip for when you hover over a circle
var tooltip = g.append("text")
.attr("class", "tooltip")
.style("opacity", 0);




/////////////////// Helper Function /////////////////////

//Taken from http://bl.ocks.org/mbostock/7555321
//Wraps SVG text
function wrap(text, width) {
text.each(function() {
var text = d3.select(this),
	words = text.text().split(/\s+/).reverse(),
	word,
	line = [],
	lineNumber = 0,
	lineHeight = 1.4, // ems
	y = text.attr("y"),
	x = text.attr("x"),
	dy = parseFloat(text.attr("dy")),
	tspan = text.text(null).append("tspan").attr("x", x).attr("y", y).attr("dy", dy + "em");

while (word = words.pop()) {
  line.push(word);
  tspan.text(line.join(" "));
  if (tspan.node().getComputedTextLength() > width) {
	line.pop();
	tspan.text(line.join(" "));
	line = [word];
	tspan = text.append("tspan").attr("x", x).attr("y", y).attr("dy", ++lineNumber * lineHeight + dy + "em").text(word);
  }
}
});




}//wrap

}//RadarChart


</script> <!-- end temporarily inline script -->













<script>

/* Radar chart design created by Nadieh Bremer - VisualCinnamon.com */



//////////////////////// Set-Up //////////////////////////////

var margin = {top: 100, right: 100, bottom: 100, left: 100},
	width = Math.min(500, window.innerWidth - 10) - margin.left - margin.right,
	height = Math.min(width, window.innerHeight - margin.top - margin.bottom - 20);



////////////////////////// Data //////////////////////////////

var categories = ["acting", "dialogue", "hair + makeup", "wardrobe", "creative use of language to avoid censorship", "victimization of a female character", "music"]

var data1 = [

		[//color-1
		{axis:categories[0],value:3},
		{axis:categories[1],value:2},
		{axis:categories[2],value:1},
		{axis:categories[3],value:1},
		{axis:categories[4],value:2.5},
		{axis:categories[5],value:4.5},
		{axis:categories[6],value:5},
		],

		[//color-1
		{axis:categories[0],value:5},
		{axis:categories[1],value:2.5},
		{axis:categories[2],value:1.5},
		{axis:categories[3],value:5},
		{axis:categories[4],value:3.5},
		{axis:categories[5],value:1.5},
		{axis:categories[6],value:1.5},
		],

		[//color-1
		{axis:categories[0],value:1},
		{axis:categories[1],value:2.5},
		{axis:categories[2],value:1},
		{axis:categories[3],value:4},
		{axis:categories[4],value:3.5},
		{axis:categories[5],value:2},
		{axis:categories[6],value:3},
		]

		];


	var data2 = [

			[//color-1
			{axis:categories[0],value:1},
			{axis:categories[1],value:2},
			{axis:categories[2],value:4},
			{axis:categories[3],value:2},
			{axis:categories[4],value:2},
			{axis:categories[5],value:2.5},
			{axis:categories[6],value:5},
			],

			[//color-1
			{axis:categories[0],value:5},
			{axis:categories[1],value:4.5},
			{axis:categories[2],value:5},
			{axis:categories[3],value:4},
			{axis:categories[4],value:3},
			{axis:categories[5],value:3.5},
			{axis:categories[6],value:1},
			],

			[//color-1
			{axis:categories[0],value:5},
			{axis:categories[1],value:2.5},
			{axis:categories[2],value:4},
			{axis:categories[3],value:2},
			{axis:categories[4],value:1.5},
			{axis:categories[5],value:1},
			{axis:categories[6],value:1},
			]

			];


	var data6 = [
	  {
	    className: 'germany', // optional can be used for styling
	    axes: [
	      {axis: "strength", value: 13},
	      {axis: "intelligence", value: 6},
	      {axis: "charisma", value: 5},
	      {axis: "dexterity", value: 9},
	      {axis: "luck", value: 2}
	    ]
	  },
	  {
	    className: 'argentina',
	    axes: [
	      {axis: "strength", value: 6},
	      {axis: "intelligence", value: 7},
	      {axis: "charisma", value: 10},
	      {axis: "dexterity", value: 13},
	      {axis: "luck", value: 9}
	    ]
	  }
	];

	var data7 = [
	  {
	    className: 'germany', // optional can be used for styling
	    axes: [
	      {axis: "strength", value: 3},
	      {axis: "intelligence", value: 16},
	      {axis: "charisma", value: 15},
	      {axis: "dexterity", value: 19},
	      {axis: "luck", value: 12}
	    ]
	  },
	  {
	    className: 'argentina',
	    axes: [
	      {axis: "strength", value: 16},
	      {axis: "intelligence", value: 17},
	      {axis: "charisma", value: 1},
	      {axis: "dexterity", value: 3},
	      {axis: "luck", value: 19}
	    ]
	  }
	];



//////////////////// Draw the Chart //////////////////////////

var color = d3.scale.ordinal()
	.range(["#ff40f7","#fff35b","#51ff42"]);


//var pattern = ["url(#horizontal-stripe-3)","#fff35b","#51ff42"];



var radarChartOptions = {
  w: width,
  h: height,
  margin: margin,
  maxValue: 0.5,
  levels: 5,
  roundStrokes: true,
  color: color,
  dotRadius: 3
};
//Call function to draw the Radar chart
RadarChart(".c1", data1, radarChartOptions);





var color1 = d3.scale.ordinal()
	.range(["#67ff9b","#73a2ff","#cb4dff"]);

var radarChartOptions1 = {
  w: width,
  h: height,
  margin: margin,
  maxValue: 5,
  levels: 5,
  roundStrokes: true,
  color: color1,
  dotRadius: 3
};
//Call function to draw the Radar chart
RadarChart(".c2", data2, radarChartOptions1);
</script>





<script>
// RadarChart.draw(".c1", data);
// RadarChart(".c1", data0, radarChartOptions1);
</script>


<!-- <script>
RadarChart.draw(".c2", data0);
</script> -->

</body>
</html>
